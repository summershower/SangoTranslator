"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[766],{16453:function(U,E,e){var u=e(30577),d=e.n(u),D=e(93236),a=e(8311);E.Z=function(){var O=(0,D.useState)([]),y=d()(O,2),v=y[0],l=y[1];return(0,D.useEffect)(function(){(0,a.zK)().then(function(){(0,a.pJ)().then(function(i){var h=Array.isArray(i)?i.filter(function(c){return(c==null?void 0:c.js)||(c==null?void 0:c.json)}).sort(function(c,t){return t.time-c.time}):[];h.length&&l(h)})})},[]),v}},5317:function(U,E,e){var u=e(93236);E.Z=function(){(0,u.useEffect)(function(){var d=document.querySelector(".ant-pro-layout-content");return d==null||d.classList.add("noPadding"),function(){d==null||d.classList.remove("noPadding")}},[])}},31805:function(U,E,e){e.r(E),e.d(E,{default:function(){return ve}});var u=e(58357),d=e.n(u),D=e(71977),a=e.n(D),O=e(30577),y=e.n(O),v={topBar:"topBar___WHK87",history:"history___rGRZC",flex:"flex___hDv7x",path:"path___NgfFx",url:"url___SVCxC",time:"time___WZWHh",empty:"empty___fWB_2",diffBox:"diffBox___hqGf4"},l=e(93236),i=e(45480),h=e(54422),c=e(49256),t=e(54323),o=e(78692),n=e(57907),r=e(16453),S=e(75170),$=function(){return(0,S.request)("https://gapi.meiqijiacheng.com/configure/getSTS?objectName=web",{method:"GET"})},oe=e(21156);function se(){return K.apply(this,arguments)}function K(){return K=a()(d()().mark(function w(){var B,_,x,F,b,N,Z;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,$();case 2:return B=P.sent,_=B.data,x=_.aLiYunHost,F=_.accessKeyId,b=_.accessKeySecret,N=_.bucketName,Z=_.securityToken,P.abrupt("return",new oe({region:x.replace(".aliyuncs.com",""),accessKeyId:F,accessKeySecret:b,stsToken:Z,bucket:N}));case 6:case"end":return P.stop()}},w)})),K.apply(this,arguments)}var ue=e(2534),z=e(93103),ae=e(5317),le=e(74637),Y=e.n(le),ie=e(68655),de=e.n(ie),ce=e(54498);Y().extend(ce).locale(de());var V=Y(),fe=e(92943),m=e(62086),me=function(){var B,_=(0,r.Z)();(0,ae.Z)();var x=(0,l.useState)(""),F=y()(x,2),b=F[0],N=F[1],Z=(0,l.useState)(""),W=y()(Z,2),P=W[0],he=W[1],_e=(0,l.useState)(!1),Q=y()(_e,2),ge=Q[0],X=Q[1],pe=(0,l.useState)(null),q=y()(pe,2),p=q[0],ee=q[1];function ne(){return J.apply(this,arguments)}function J(){return J=a()(d()().mark(function g(){var C,s,I,A,j,T,R,L,M=arguments;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(C=M.length>0&&M[0]!==void 0?M[0]:"",s=_.find(function(H){return H.sheetId===b}),s){f.next=4;break}return f.abrupt("return");case 4:I=(s==null?void 0:s.js)||(s==null?void 0:s.json)||"",A=s.sheetName,j=ue.ym(A,A,C,I),T=document.querySelector("#diffBox"),R={drawFileList:!1,fileListToggle:!1,fileListStartVisible:!1,fileContentToggle:!1,stickyFileHeaders:!1,matching:"lines",outputFormat:"side-by-side",renderNothingWhenEmpty:!0},L=new window.Diff2HtmlUI(T,j,R),L.draw();case 11:case"end":return f.stop()}},g)})),J.apply(this,arguments)}function te(){return k.apply(this,arguments)}function k(){return k=a()(d()().mark(function g(){var C,s,I;return d()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(s=(C=(0,z.tL)())===null||C===void 0?void 0:C.find(function(T){return(T==null?void 0:T.sheetId)===b}),!s){j.next=11;break}return i.ZP.open({type:"loading",content:"\u8BFB\u53D6\u4E91\u7AEF\u6587\u4EF6\u4E2D...",duration:0}),ee(s),j.next=6,(0,S.request)(s.url);case 6:I=j.sent,i.ZP.destroy(),ne(s.formatMode==="JS"?I:JSON.stringify(I,null,2)),j.next=13;break;case 11:ee(null),ne();case 13:case"end":return j.stop()}},g)})),k.apply(this,arguments)}(0,l.useEffect)(function(){_!=null&&_[0]&&N(_[0].sheetId)},[_]),(0,l.useEffect)(function(){te()},[b]);function ye(g){N(g)}function Se(){return G.apply(this,arguments)}function G(){return G=a()(d()().mark(function g(){var C,s,I,A,j,T,R,L,M;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(!P&&!p)){f.next=2;break}return f.abrupt("return",h.Z.error({message:"\u8BF7\u8F93\u5165\u63A8\u9001\u8DEF\u5F84"}));case 2:return f.prev=2,X(!0),i.ZP.open({type:"loading",content:"\u4E0A\u4F20\u4E2D...",duration:0}),s=_.find(function(H){return H.sheetId===b}),I=(s==null?void 0:s.js)||(s==null?void 0:s.json),A=new Blob([I],{type:"text/".concat(s!=null&&s.js?"javascript":"json")}),f.next=10,se();case 10:return j=f.sent,T=/(?<=sango-frankfurt.oss-accelerate.aliyuncs.com\/web\/test\/langTest\/).+(?=\/)/gi,R=p!=null&&p.url?(C=p.url.match(T))===null||C===void 0?void 0:C[0]:P.trim(),f.next=15,j.put("/web/test/langTest/".concat(R,"/lang.").concat(s!=null&&s.js?"js":"json"),A);case 15:L=f.sent,M=L.url,(0,z.sI)({url:M,modifyTime:+new Date,sheetId:b,formatMode:s!=null&&s.js?"JS":"JSON"}),h.Z.success({message:"\u63A8\u9001\u6210\u529F"}),X(!1),te(),i.ZP.destroy(),f.next=27;break;case 24:f.prev=24,f.t0=f.catch(2),h.Z.error({message:String(f.t0)});case 27:case"end":return f.stop()}},g,null,[[2,24]])})),G.apply(this,arguments)}function je(g){he(g.target.value)}function Ee(){(0,fe.JG)((p==null?void 0:p.url)||"")}function re(g){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return g?"".concat(C?"\u4E0A\u4F20":"\u6682\u5B58","\u65F6\u95F4\uFF1A")+V(g).format("YYYY-MM-DD HH:mm:ss")+"("+V(g).fromNow()+")":""}return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:v.topBar,children:[(0,m.jsxs)(c.Z,{align:"end",size:"large",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"\u6682\u5B58\u533A\u6587\u4EF6\uFF1A"}),(0,m.jsx)(t.Z,{defaultValue:b,style:{width:200},onChange:ye,options:_.map(function(g){return{value:g.sheetId,label:g.sheetName}})},b)]}),p?(0,m.jsxs)("div",{className:v.url,onClick:Ee,children:["\u6587\u4EF6\u8DEF\u5F84: ",p==null?void 0:p.url]}):(0,m.jsxs)("div",{className:v.path,children:[(0,m.jsx)("span",{children:"\u63A8\u9001\u8DEF\u5F84:"}),(0,m.jsx)(o.Z,{placeholder:"\u8F93\u5165OSS\u76EE\u5F55\u540D(\u5EFA\u8BAE\u9A7C\u5CF0\u547D\u540D)",style:{width:"300px"},onChange:je})]}),(0,m.jsx)("div",{className:v.upload,children:(0,m.jsx)(n.Z,{type:"primary",onClick:Se,disabled:ge,children:"\u63A8\u9001\u4E91\u7AEF"})})]}),(0,m.jsx)("div",{className:v.history,children:p?(0,m.jsxs)("div",{className:v.time,children:[(0,m.jsx)("span",{children:re((_==null||(B=_.find(function(g){return g.sheetId===b}))===null||B===void 0?void 0:B.time)||0)}),(0,m.jsx)("span",{children:re(p==null?void 0:p.modifyTime,!0)})]}):"\u8BE5\u5DE5\u4F5C\u8868\u4E3A\u521D\u6B21\u63A8\u9001\uFF0C\u8BF7\u6307\u5B9A\u63A8\u9001\u8DEF\u5F84(\u6BCF\u4E2A\u5DE5\u4F5C\u8868\u53EA\u80FD\u586B\u5199\u4E00\u6B21\uFF0C\u4E00\u7ECF\u786E\u8BA4\u5C06\u65E0\u6CD5\u66F4\u6539)"})]}),(0,m.jsxs)("div",{className:v.diff,children:[(0,m.jsx)("div",{className:v.empty,children:"\u6682\u5B58\u6587\u6863\u4E0E\u4E91\u7AEF\u5BF9\u6BD4\u6CA1\u6709\u53D8\u5316\u3002"}),(0,m.jsx)("div",{id:"diffBox",className:v.diffBox})]})]})},ve=me},92943:function(U,E,e){e.d(E,{Bl:function(){return y},JG:function(){return d},SV:function(){return O},UZ:function(){return v},_v:function(){return D}});var u=e(45480);function d(l){try{var i=document.createElement("textarea");i.value=l,document.body.appendChild(i),i.setAttribute("readonly","readonly"),i.setSelectionRange(0,i.value.length),i.select(),document.execCommand("Copy"),document.body.removeChild(i),u.ZP.success("\u590D\u5236\u6210\u529F")}catch{u.ZP.error("\u590D\u5236\u5931\u8D25")}}function D(l){return new Promise(function(i){setTimeout(function(){i(!0)},l||1e3)})}function a(l,i,h){try{var c=document.createElement("a");c.href=URL.createObjectURL(new Blob([l],{type:"text/".concat(i)})),c.setAttribute("download","lang.".concat(h)),document.body.appendChild(c),c.click(),document.body.removeChild(c),u.ZP.success("\u5DF2\u5F00\u59CB\u4E0B\u8F7D")}catch(t){console.log(t),u.ZP.error("\u8F6C\u6362\u5931\u8D25")}}function O(l){a(l,"json","json")}function y(l){a(l,"javascript","js")}function v(l){return new Promise(function(i,h){try{var c=function(){try{document.body.appendChild(t),setTimeout(function(){window.iframeGetObjectErrorHandler("\u83B7\u53D6\u4EE3\u7801\u8D85\u65F6\uFF0C\u8BF7\u6253\u5F00\u63A7\u5236\u53F0\u67E5\u770B\u4EE3\u7801\u9519\u8BEF")},3e3)}catch(S){h(S)}},t=document.createElement("script"),o=l+`\rtry {
        const res = {
          zh:{},
          en:{},
          ar:{},
          ur:{},
          tr:{},
        }
        const keys = Object.keys(lang_en);
        keys.forEach(key => {
          res['en'][key] = lang_en[key] || '';
          res['zh'][key] = lang_zh[key] || '';
          res['ar'][key] = lang_ar[key] || '';
          res['ur'][key] = lang_ur[key] || '';
          res['tr'][key] = lang_tr[key] || '';
        })
        window.iframeGetObject(res);
       } catch(err) {
        window.iframeGetObjectErrorHandler(err);
       }
        `;t.innerHTML=o,t.type="module";var n=document.createElement("iframe");n.style.position="absolute",n.style.zIndex="-1",n.style.top="-9999px",n.style.width="1px",n.style.height="1px",n.onload=c,n.onerror=function(r){h(r)},window.iframeGetObjectErrorHandler=function(r){h(r)},window.iframeGetObject=function(r){i(r),document.body.removeChild(n)},document.body.appendChild(n)}catch(r){h(r)}})}},8311:function(U,E,e){e.d(E,{Pj:function(){return l},ij:function(){return v},pJ:function(){return h},yH:function(){return c},zK:function(){return O}});var u="sheet",d="SangoTranslator",D=1,a;function O(){return new Promise(function(t,o){var n=window.indexedDB.open(d,D);n.onupgradeneeded=function(r){var S;a=r==null||(S=r.target)===null||S===void 0?void 0:S.result,a.objectStoreNames.contains(u)||a.createObjectStore(u)},n.onsuccess=function(r){var S;a=r==null||(S=r.target)===null||S===void 0?void 0:S.result,t(!0),console.log("DB\u8FDE\u63A5\u6210\u529F")},n.onerror=function(r){o(!1),console.log(r,"DB\u8FDE\u63A5\u5931\u8D25")}})}function y(t){var o=a.transaction(u,"readwrite").objectStore(u).add(t,"main");o.onsuccess=function(){console.log("\u5199\u5165",o.result)},o.onerror=function(n){console.log(n,"\u5199\u5165\u5931\u8D25")}}function v(){return new Promise(function(t){var o=a.transaction(u).objectStore(u).get("main");o.onsuccess=function(n){var r;t(n==null||(r=n.target)===null||r===void 0?void 0:r.result)}})}function l(t){var o=a.transaction(u,"readwrite").objectStore(u).put(t,"main");o.onsuccess=function(){console.log("\u4FEE\u6539\u6210\u529F",o.result)},o.onerror=function(n){console.log(n,"\u4FEE\u6539\u5931\u8D25")}}function i(t){var o=a.transaction(u,"readwrite").objectStore(u).delete(t);o.onsuccess=function(){console.log("\u5220\u9664\u6210\u529F",o.result)},o.onerror=function(n){console.log(n,"\u5220\u9664\u5931\u8D25")}}function h(){return new Promise(function(t){var o=a.transaction(u).objectStore(u).getAll();o.onsuccess=function(n){var r;t(n==null||(r=n.target)===null||r===void 0?void 0:r.result)}})}function c(t){var o=a.transaction(u,"readwrite").objectStore(u).put(t,t.sheetId);o.onsuccess=function(){console.log("\u50A8\u5B58\u6587\u4EF6\u6210\u529F",o.result)},o.onerror=function(n){console.log(n,"\u50A8\u5B58\u6587\u4EF6\u5931\u8D25")}}},93103:function(U,E,e){e.d(E,{W3:function(){return l},gT:function(){return i},sI:function(){return h},tL:function(){return c}});var u=e(90967),d=e.n(u),D=e(24047),a=e.n(D),O=e(86378),y=e.n(O),v={UILang:"TR",prefix:"",keyMode:"WORD",formatMode:"JS"};function l(t,o,n){try{var r=localStorage.getItem(t),S=r?y()(y()({},JSON.parse(r)),{},a()({},o,n)):y()(y()({},v),{},a()({},o,n));localStorage.setItem(t,JSON.stringify(S))}catch{}}function i(t,o){try{var n=localStorage.getItem(t),r=n?JSON.parse(n):v;return r[o]}catch{}}function h(t){try{var o=localStorage.getItem("cloudSheet"),n=o?[t].concat(d()(JSON.parse(o).filter(function(r){return r.sheetId!==t.sheetId}))):[t];localStorage.setItem("cloudSheet",JSON.stringify(n))}catch{}}function c(){try{var t=localStorage.getItem("cloudSheet"),o=t?JSON.parse(t):[];return o}catch{return[]}}}}]);
